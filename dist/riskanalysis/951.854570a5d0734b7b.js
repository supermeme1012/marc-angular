"use strict";(self.webpackChunkriskanalysis=self.webpackChunkriskanalysis||[]).push([[951],{6236:(Q,h,i)=>{i.d(h,{J:()=>p}),i(8288);var b=i(6895),s=i(4650);let p=(()=>{class e{}return e.\u0275fac=function(d){return new(d||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[b.ez]}),e})()},6951:(Q,h,i)=>{i.r(h),i.d(h,{SapSystemModule:()=>ce});var c=i(6895),S=i(2510),y=i(7579),x=i(4004),u=i(2722),C=i(8505),_=i(262),b=i(2843),s=i(4006),p=i(5412),e=i(4650),m=i(529);let d=(()=>{class o{constructor(t){this.httpClient=t}list(t){return this.httpClient.get("sapsystem/getSapConfig?",{params:new m.LE({fromObject:{...t}})})}save(t){return this.httpClient.post("sapsystem/operations?oper=add",t)}delete(t){return this.httpClient.get(`reportingUnit/deleteRU?id=${t}`)}update(t,a){return this.httpClient.post(`sapsystem/operations?oper=edit&id=${t}`,a)}initForm(){return this.httpClient.get("sapsystem/loadAdd?edit=false")}initFormForUpdate(t){return this.httpClient.get(`sapsystem/loadAdd?edit=true&id=${t}`)}testSapSystem(t){return this.httpClient.get(`sapsystem/testConn?id=${t}`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var v=i(9439),O=i(6284),T=i(7404),Z=i(9549),k=i(8271),A=i(4144),N=i(4859),U=i(4385),Y=i(3238);function D(o,n){if(1&o&&(e.TgZ(0,"mat-option",55),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.text," ")}}function j(o,n){if(1&o&&(e.TgZ(0,"mat-option",55),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t[0]),e.xp6(1),e.hij(" ",t[1]," ")}}function L(o,n){if(1&o&&(e.TgZ(0,"mat-option",55),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.text," ")}}function E(o,n){if(1&o&&(e.TgZ(0,"mat-option",55),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function R(o,n){if(1&o&&(e.TgZ(0,"mat-option",55),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function $(o,n){if(1&o&&(e.TgZ(0,"mat-option",55),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.text," ")}}function z(o,n){if(1&o&&(e.TgZ(0,"mat-option",55),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.text," ")}}function M(o,n){if(1&o&&(e.TgZ(0,"mat-option",55),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.text," ")}}function B(o,n){if(1&o&&(e.TgZ(0,"mat-option",55),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.text," ")}}function P(o,n){if(1&o&&(e.TgZ(0,"mat-option",55),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.text," ")}}function H(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",4)(2,"mat-dialog-content",5)(3,"div",6)(4,"div",7)(5,"div",8),e._uU(6,"Required"),e.qZA(),e.TgZ(7,"div",9)(8,"mat-form-field")(9,"mat-label"),e._uU(10,"Type"),e.qZA(),e.TgZ(11,"mat-select",10),e.NdJ("selectionChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.typeSelection(r))}),e.YNc(12,D,2,2,"mat-option",11),e.qZA()(),e.TgZ(13,"mat-form-field")(14,"mat-label"),e._uU(15,"SID"),e.qZA(),e._UZ(16,"input",12),e.TgZ(17,"mat-error"),e._UZ(18,"form-error",13),e.qZA()(),e.TgZ(19,"mat-form-field")(20,"mat-label"),e._uU(21,"Destination Name"),e.qZA(),e._UZ(22,"input",14),e.TgZ(23,"mat-error"),e._UZ(24,"form-error",15),e.qZA()(),e.TgZ(25,"mat-form-field")(26,"mat-label"),e._uU(27,"Description"),e.qZA(),e._UZ(28,"input",16),e.TgZ(29,"mat-error"),e._UZ(30,"form-error",17),e.qZA()(),e.TgZ(31,"mat-form-field")(32,"mat-label"),e._uU(33,"Host"),e.qZA(),e._UZ(34,"input",18),e.TgZ(35,"mat-error"),e._UZ(36,"form-error",19),e.qZA()(),e.TgZ(37,"mat-form-field")(38,"mat-label"),e._uU(39,"Instance/Port No"),e.qZA(),e._UZ(40,"input",20),e.TgZ(41,"mat-error"),e._UZ(42,"form-error",21),e.qZA()(),e.TgZ(43,"mat-form-field")(44,"mat-label"),e._uU(45,"Username"),e.qZA(),e._UZ(46,"input",22),e.TgZ(47,"mat-error"),e._UZ(48,"form-error",23),e.qZA()(),e.TgZ(49,"mat-form-field")(50,"mat-label"),e._uU(51,"Password"),e.qZA(),e._UZ(52,"input",24),e.TgZ(53,"mat-error"),e._UZ(54,"form-error",25),e.qZA()(),e.TgZ(55,"mat-form-field")(56,"mat-label"),e._uU(57,"Language"),e.qZA(),e.TgZ(58,"mat-select",26),e.YNc(59,j,2,2,"mat-option",11),e.qZA(),e.TgZ(60,"mat-error"),e._UZ(61,"form-error",27),e.qZA()(),e.TgZ(62,"mat-form-field")(63,"mat-label"),e._uU(64,"Client"),e.qZA(),e._UZ(65,"input",28),e.TgZ(66,"mat-error"),e._UZ(67,"form-error",29),e.qZA()(),e.TgZ(68,"mat-form-field")(69,"mat-label"),e._uU(70,"IsPooled?"),e.qZA(),e.TgZ(71,"mat-select",30),e.NdJ("selectionChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.pooledChange(r))}),e.YNc(72,L,2,2,"mat-option",11),e.qZA(),e.TgZ(73,"mat-error"),e._UZ(74,"form-error",31),e.qZA()(),e.TgZ(75,"mat-form-field")(76,"mat-label"),e._uU(77,"Timezone"),e.qZA(),e.TgZ(78,"mat-select",32),e.YNc(79,E,2,2,"mat-option",11),e.qZA(),e.TgZ(80,"mat-error"),e._UZ(81,"form-error",33),e.qZA()(),e.TgZ(82,"mat-form-field")(83,"mat-label"),e._uU(84,"System Role"),e.qZA(),e.TgZ(85,"mat-select",34),e.YNc(86,R,2,2,"mat-option",11),e.qZA(),e.TgZ(87,"mat-error"),e._UZ(88,"form-error",35),e.qZA()(),e.TgZ(89,"mat-form-field")(90,"mat-label"),e._uU(91,"License Check?"),e.qZA(),e.TgZ(92,"mat-select",36),e.YNc(93,$,2,2,"mat-option",11),e.qZA(),e.TgZ(94,"mat-error"),e._UZ(95,"form-error",37),e.qZA()()()(),e.TgZ(96,"div",38)(97,"div",8),e._uU(98,"Optional"),e.qZA(),e.TgZ(99,"div",39)(100,"mat-form-field")(101,"mat-label"),e._uU(102,"Enable Cam?"),e.qZA(),e.TgZ(103,"mat-select",40),e.YNc(104,z,2,2,"mat-option",11),e.qZA(),e.TgZ(105,"mat-error"),e._UZ(106,"form-error",41),e.qZA()(),e.TgZ(107,"mat-form-field")(108,"mat-label"),e._uU(109,"Is Central User Repository?"),e.qZA(),e.TgZ(110,"mat-select",42),e.YNc(111,M,2,2,"mat-option",11),e.qZA(),e.TgZ(112,"mat-error"),e._UZ(113,"form-error",43),e.qZA()(),e.TgZ(114,"mat-form-field")(115,"mat-label"),e._uU(116,"Is HANA System?"),e.qZA(),e.TgZ(117,"mat-select",44),e.YNc(118,B,2,2,"mat-option",11),e.qZA(),e.TgZ(119,"mat-error"),e._UZ(120,"form-error",45),e.qZA()(),e.TgZ(121,"mat-form-field")(122,"mat-label"),e._uU(123,"Enable Custom DBTABLOG?"),e.qZA(),e.TgZ(124,"mat-select",46),e.YNc(125,P,2,2,"mat-option",11),e.qZA(),e.TgZ(126,"mat-error"),e._UZ(127,"form-error",47),e.qZA()(),e.TgZ(128,"mat-form-field")(129,"mat-label"),e._uU(130,"Pool Capacity"),e.qZA(),e._UZ(131,"input",48),e.TgZ(132,"mat-error"),e._UZ(133,"form-error",49),e.qZA()(),e.TgZ(134,"mat-form-field")(135,"mat-label"),e._uU(136,"Peak Limit"),e.qZA(),e._UZ(137,"input",50),e.TgZ(138,"mat-error"),e._UZ(139,"form-error",51),e.qZA()()()()()(),e.TgZ(140,"mat-dialog-actions",52)(141,"button",53),e._uU(142,"Cancel"),e.qZA(),e.TgZ(143,"button",54),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.storeOrUpdateSapSystem())}),e._uU(144,"Save"),e.qZA()()(),e.BQk()}if(2&o){const t=n.ngIf,a=e.oxw();e.xp6(1),e.Q6J("formGroup",t),e.xp6(11),e.Q6J("ngForOf",a.types),e.xp6(6),e.Q6J("form",t),e.xp6(6),e.Q6J("form",t),e.xp6(6),e.Q6J("form",t),e.xp6(6),e.Q6J("form",t),e.xp6(6),e.Q6J("form",t),e.xp6(6),e.Q6J("form",t),e.xp6(6),e.Q6J("form",t),e.xp6(5),e.Q6J("ngForOf",a.languages),e.xp6(2),e.Q6J("form",t),e.xp6(6),e.Q6J("form",t),e.xp6(5),e.Q6J("ngForOf",a.yesNoFields),e.xp6(2),e.Q6J("form",t),e.xp6(5),e.Q6J("ngForOf",a.timezones),e.xp6(2),e.Q6J("form",t),e.xp6(5),e.Q6J("ngForOf",a.systemRoles),e.xp6(2),e.Q6J("form",t),e.xp6(5),e.Q6J("ngForOf",a.yesNoFields),e.xp6(2),e.Q6J("form",t),e.xp6(9),e.Q6J("ngForOf",a.yesNoFields),e.xp6(2),e.Q6J("form",t),e.xp6(5),e.Q6J("ngForOf",a.yesNoFields),e.xp6(2),e.Q6J("form",t),e.xp6(5),e.Q6J("ngForOf",a.yesNoFields),e.xp6(2),e.Q6J("form",t),e.xp6(5),e.Q6J("ngForOf",a.yesNoFields),e.xp6(2),e.Q6J("form",t),e.xp6(6),e.Q6J("form",t),e.xp6(6),e.Q6J("form",t),e.xp6(4),e.Q6J("disabled",!t.valid)}}function G(o,n){1&o&&e._uU(0,"Please wait...")}let w=(()=>{class o{constructor(t,a,r,l,g,fe,ue,ge){this.dialogData=t,this.sapSystemService=a,this.passwordService=r,this.formBuilder=l,this.formValidation=g,this.notificationService=fe,this.route=ue,this.dialogRef=ge,this.subject=new y.x,this.title="Add Sap System",this.yesNoFields=[{value:null,text:"Please select"},{value:!0,text:"YES"},{value:!1,text:"NO"}],this.types=[{value:!0,text:"Offline"},{value:!1,text:"Online"}],this.timezones=[],this.systemRoles=[]}ngOnInit(){this.initFormFields()}typeSelection(t){this.enableDisableFields(t.value)}enableDisableFields(t){t?(this.form.controls.hostName.disable(),this.form.controls.sysNr.disable(),this.form.controls.userName.disable(),this.form.controls.password.disable(),this.form.controls.clientNumber.disable(),this.form.controls.hideInUserAdmin.disable(),this.form.controls.hanaSystem.disable(),this.form.controls.customDbtablog.disable(),this.form.controls.poolCapacity.disable(),this.form.controls.peakLimit.disable(),this.form.controls.pooled.disable()):(this.form.controls.hostName.enable(),this.form.controls.sysNr.enable(),this.form.controls.userName.enable(),this.form.controls.password.enable(),this.form.controls.clientNumber.enable(),this.form.controls.hideInUserAdmin.enable(),this.form.controls.hanaSystem.enable(),this.form.controls.customDbtablog.enable(),this.form.controls.poolCapacity.enable(),this.form.controls.peakLimit.enable(),this.form.controls.pooled.enable())}pooledChange(t){this.enableDisablePooled(t.value)}enableDisablePooled(t){t?(this.form.controls.poolCapacity.enable(),this.form.controls.peakLimit.enable()):(this.form.controls.poolCapacity.disable(),this.form.controls.peakLimit.disable())}initFormFields(){let t=this.sapSystemService.initForm();this.sapSystemId&&(t=this.sapSystemService.initFormForUpdate(this.sapSystemId)),this.form$=t.pipe((0,x.U)(a=>{const r=a.data.sapSystem;return this.languages=Object.entries(a.data.languagMap),this.timezones=a.data.timezones,this.systemRoles=a.data.systemRoles,this.createForm(r)}))}createForm(t){return this.form=this.formBuilder.group({id:[t.id],offline:[t.offline,[s.kI.required]],destinationName:[t.destinationName,[s.kI.required]],description:[t.description,[s.kI.required]],hostName:[t.hostName,[s.kI.required]],sysNr:[t.sysNr,[s.kI.required]],userName:[t.userName,[s.kI.required]],password:[t.password,[s.kI.required]],languageCode:[t.languageCode,s.kI.required],pooled:[t.pooled,s.kI.required],poolCapacity:[t.poolCapacity,s.kI.required],peakLimit:[t.peakLimit,s.kI.required],clientNumber:[t.clientNumber,s.kI.required],hideInUserAdmin:[t.hideInUserAdmin,s.kI.required],SID:[t.SID,s.kI.required],timeZone:[null===t.timeZone?null:t.timeZone.id,s.kI.required],centralRepo:[t.centralRepo,s.kI.required],hanaSystem:[t.hanaSystem,s.kI.required],customDbtablog:[t.customDbtablog,s.kI.required],systemRole:[t.systemRole,s.kI.required],licenseCheck:[t.licenseCheck,s.kI.required]}),null!==t.id&&(this.form.controls.offline.disable(),this.form.controls.destinationName.disable()),this.enableDisableFields(this.form.controls.offline.value),this.enableDisablePooled(this.form.controls.pooled.value),this.form}storeOrUpdateSapSystem(){let t;this.form.value.timeZone=this.timezones.find(a=>a.id===this.form.value.timeZone),t=this.sapSystemId?this.sapSystemService.update(this.sapSystemId,this.form.getRawValue()):this.sapSystemService.save(this.form.value),t.pipe((0,C.b)(a=>{this.notificationService.show(a),this.dialogRef.close(!0)}),(0,_.K)(a=>(this.formValidation.validateAllFields(this.form,a.error.data),(0,b._)(()=>a))),(0,u.R)(this.subject)).subscribe()}ngOnDestroy(){this.subject.next(!0),this.subject.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.WI),e.Y36(d),e.Y36(v.C),e.Y36(s.qu),e.Y36(O.m),e.Y36(T.g),e.Y36(S.gz),e.Y36(p.so))},o.\u0275cmp=e.Xpm({type:o,selectors:[["admin-sap-system-add"]],decls:7,vars:5,consts:[[1,"w-full","md:w-auto","max-w-full"],["mat-dialog-title",""],[4,"ngIf","ngIfElse"],["loading",""],[1,"mt-8",3,"formGroup"],[1,"mat-typography"],[1,"grid","grid-cols-3","flex-auto","gap-4"],[1,"flex","flex-col","col-span-2","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"text-xl","font-semibold","pb-6"],[1,"grid","grid-cols-2","flex-auto","gap-4"],["formControlName","offline",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","SID"],["name","SID",3,"form"],["matInput","","type","text","formControlName","destinationName"],["name","destinationName",3,"form"],["matInput","","type","text","formControlName","description"],["name","description",3,"form"],["matInput","","type","text","formControlName","hostName"],["name","hostName",3,"form"],["matInput","","type","text","formControlName","sysNr"],["name","sysNr",3,"form"],["matInput","","type","text","formControlName","userName"],["name","userName",3,"form"],["matInput","","type","password","formControlName","password"],["name","password",3,"form"],["formControlName","languageCode"],["name","languageCode",3,"form"],["matInput","","type","text","formControlName","clientNumber"],["name","clientNumber",3,"form"],["formControlName","pooled",3,"selectionChange"],["name","pooled",3,"form"],["formControlName","timeZone"],["name","timeZone",3,"form"],["formControlName","systemRole"],["name","systemRole",3,"form"],["formControlName","licenseCheck"],["name","licenseCheck",3,"form"],[1,"flex","flex-col","col-span-1","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"grid","grid-cols-1","flex-auto","gap-4"],["formControlName","hideInUserAdmin"],["name","hideInUserAdmin",3,"form"],["formControlName","centralRepo"],["name","centralRepo",3,"form"],["formControlName","hanaSystem"],["name","hanaSystem",3,"form"],["formControlName","customDbtablog"],["name","customDbtablog",3,"form"],["matInput","","type","text","formControlName","poolCapacity"],["name","poolCapacity",3,"form"],["matInput","","type","text","formControlName","peakLimit"],["name","peakLimit",3,"form"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"],[3,"value"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA(),e.YNc(3,H,145,31,"ng-container",2),e.ALo(4,"async"),e.YNc(5,G,1,0,"ng-template",null,3,e.W1O),e.qZA()),2&t){const r=e.MAs(6);e.xp6(2),e.Oqu(a.title),e.xp6(1),e.Q6J("ngIf",e.lcZ(4,3,a.form$))("ngIfElse",r)}},dependencies:[c.sg,c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,p.ZT,p.uh,p.xY,p.H8,Z.TO,Z.KE,Z.hX,k.A,A.Nt,N.lW,U.gD,Y.ey,c.Ov],styles:[".mat-form-field.mat-form-field-appearance-fill.mat-form-field-has-label .mat-form-field-wrapper{margin-top:12px!important}  .mat-dialog-content{max-height:inherit}"],changeDetection:0}),o})();var F=i(805),f=i(403),I=i(5593),q=i(1327),J=i(5722);const K=function(){return{minWidth:"200px"}};function V(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",7)(1,"p-multiSelect",8),e.NdJ("ngModelChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedColumns=r)}),e.qZA(),e.TgZ(2,"button",9),e.NdJ("click",function(r){e.CHM(t);const l=e.MAs(4);return e.KtG(l.toggle(r))}),e.qZA(),e._UZ(3,"p-menu",10,11),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.Akn(e.DdM(6,K)),e.Q6J("options",t.cols)("ngModel",t.selectedColumns),e.xp6(2),e.Q6J("popup",!0)("model",t.menuItems)}}function W(o,n){if(1&o&&(e.TgZ(0,"th",13),e._uU(1),e._UZ(2,"p-sortIcon",14)(3,"p-columnFilter",15),e.qZA()),2&o){const t=n.$implicit;e.s9C("pSortableColumn",t.field),e.xp6(1),e.hij(" ",t.header," "),e.xp6(1),e.s9C("field",t.field),e.xp6(1),e.s9C("type",t.type),e.s9C("field",t.field)}}function X(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,W,4,5,"th",12),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.selectedColumns)}}const ee=function(o,n){return{"true-icon pi-check-circle":o,"false-icon pi-times-circle":n}};function te(o,n){if(1&o&&(e.TgZ(0,"td",20),e._UZ(1,"i",21),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw().$implicit;e.xp6(1),e.Q6J("ngClass",e.WLB(1,ee,a[t.field],!a[t.field]))}}function oe(o,n){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw().$implicit;e.xp6(1),e.Oqu(a[t.field][t.subField])}}function ae(o,n){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw().$implicit;e.xp6(1),e.Oqu(a[t.field])}}function ne(o,n){if(1&o&&(e.ynx(0),e.YNc(1,te,2,4,"td",18),e.YNc(2,oe,2,1,"td",19),e.YNc(3,ae,2,1,"td",19),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf","boolean"===t.type),e.xp6(1),e.Q6J("ngIf","text"===t.type&&t.subField),e.xp6(1),e.Q6J("ngIf","text"===t.type&&!t.subField)}}function ie(o,n){if(1&o&&(e.TgZ(0,"tr",16),e.YNc(1,ne,4,3,"ng-container",17),e.qZA()),2&o){const t=n.$implicit,a=e.oxw();e.Q6J("pSelectableRow",t),e.xp6(1),e.Q6J("ngForOf",a.selectedColumns)}}let se=(()=>{class o{constructor(t,a,r,l){this.notificationService=t,this.sapSystemService=a,this.matDialog=r,this.confirmationService=l,this.sapSystems=[],this.menuItems=[{label:"Add",icon:"pi pi-user-plus",command:()=>this.addSapSystem()},{label:"Edit",icon:"pi pi-user-edit",command:()=>this.editSapSystem()},{label:"Test",icon:"pi pi-test",command:()=>this.testSapSystem()},{label:"Delete",icon:"pi pi-trash",command:()=>this.deleteSapSystem()}],this.subject=new y.x,this.cols=[{field:"destinationName",type:"text",header:"Connection"},{field:"description",type:"text",header:"Description"},{field:"offline",type:"boolean",header:"Offline"},{field:"hostName",type:"text",header:"Hostname"},{field:"userName",type:"text",header:"Username"},{field:"clientNumber",type:"text",header:"Client"},{field:"sysNr",type:"text",header:"Instance Nr"},{field:"languageCode",type:"text",header:"Language"},{field:"sid",type:"text",header:"SID"},{field:"timeZone",type:"text",subField:"name",header:"Timezone"}],this.filterColumns=this.cols.filter(g=>"boolean"!==g.type).map(g=>g.field),this.selectedColumns=this.cols}ngOnInit(){}loadSapSystems(t){this.lastTableLazyLoadEvent=t,setTimeout(()=>{this.sapSystemService.list({lazyEvent:JSON.stringify(t)}).pipe((0,x.U)(a=>{this.sapSystems=a.data.rows,this.totalRecords=a.data.records,this.loading=!1}),(0,u.R)(this.subject)).subscribe()},10)}ngOnDestroy(){this.subject.next(!0),this.subject.complete()}addSapSystem(){this.selectedSapSystem=null,this.openAddOrEditSapSystemDialog()}openAddOrEditSapSystemDialog(){this.matDialog.open(w,{width:"60%",data:{sapSystemId:this.selectedSapSystem?this.selectedSapSystem.id:null}}).afterClosed().subscribe(a=>{console.log(`Dialog result: ${a}`),a&&(this.loadSapSystems(this.lastTableLazyLoadEvent),this.selectedSapSystem=null)})}editSapSystem(){this.checkSelected(),this.openAddOrEditSapSystemDialog()}checkSelected(){if(!this.selectedSapSystem)throw this.notificationService.error("Please select a system"),Error("Please select a system")}testSapSystem(){this.checkSelected(),this.checkIsOffline(),this.sapSystemService.testSapSystem(this.selectedSapSystem.id).pipe((0,x.U)(t=>{this.notificationService.show(t)}),(0,u.R)(this.subject)).subscribe()}checkIsOffline(){if(this.selectedSapSystem.offline)throw this.notificationService.error("Please select online sap system"),Error("Please select online sap system")}deleteSapSystem(){this.checkSelected(),this.confirmationService.confirm({message:"Do you want to remove selected sap system?",accept:()=>{this.sapSystemService.delete(this.selectedSapSystem.id).pipe((0,C.b)(t=>{this.notificationService.show(t),this.loadSapSystems(this.lastTableLazyLoadEvent)}),(0,_.K)(t=>(this.notificationService.show(t.data.message),(0,b._)(()=>t))),(0,u.R)(this.subject)).subscribe()}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.g),e.Y36(d),e.Y36(p.uw),e.Y36(F.YP))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sapsystem"]],decls:9,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0","p-6","sm:p-10"],[1,"text-3xl","font-bold","mt-0","mb-6"],["dataKey","destinationName","columnResizeMode","expand","scrollDirection","horizontal","selectionMode","single",3,"value","lazy","paginator","scrollable","selection","globalFilterFields","rows","totalRecords","loading","onLazyLoad","selectionChange"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex",2,"justify-content","space-between"],["optionLabel","header","selectedItemsLabel","{0} columns selected","placeholder","Choose Columns",3,"options","ngModel","ngModelChange"],["type","button","pButton","","icon","pi pi-angle-double-down","label","Actions",1,"ml-auto","p-button-rounded","p-button-sm",3,"click"],["appendTo","body",3,"popup","model"],["menu",""],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["display","menu",3,"type","field"],[3,"pSelectableRow"],[4,"ngFor","ngForOf"],["style","width: 200px",4,"ngIf"],[4,"ngIf"],[2,"width","200px"],[1,"pi",3,"ngClass"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h1",1),e._uU(3,"Sap System Management"),e.qZA()(),e.TgZ(4,"p-table",2,3),e.NdJ("onLazyLoad",function(l){return a.loadSapSystems(l)})("selectionChange",function(l){return a.selectedSapSystem=l}),e.YNc(6,V,5,7,"ng-template",4),e.YNc(7,X,2,1,"ng-template",5),e.YNc(8,ie,2,2,"ng-template",6),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("value",a.sapSystems)("lazy",!0)("paginator",!0)("scrollable",!0)("selection",a.selectedSapSystem)("globalFilterFields",a.filterColumns)("rows",10)("totalRecords",a.totalRecords)("loading",a.loading))},dependencies:[c.mk,c.sg,c.O5,f.iA,F.jx,f.lQ,f.Ei,f.fz,f.xl,I.Hq,q.v2,s.JJ,s.On,J.NU]}),o})();var re=i(1740),le=i(6709),me=i(4466),pe=i(6236);const de=[{path:"",component:se},{path:"add",component:w}];let ce=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,S.Bz.forChild(de),f.U$,re.j,I.hJ,q.$9,s.UX,p.Is,Z.lN,me.m,A.c,le.p9,N.ot,U.LD,pe.J,J.q4]}),o})()}}]);