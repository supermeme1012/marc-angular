"use strict";(self.webpackChunkriskanalysis=self.webpackChunkriskanalysis||[]).push([[711],{1711:(Q,E,o)=>{o.r(E),o.d(E,{AdminUserModule:()=>xe});var s=o(2510),y=o(6257),n=o(4006),C=o(9549),l=o(4859),x=o(4144),D=o(8739),O=o(7155),u=o(5412),w=o(6412),R=o(4385),P=o(7392),A=o(6895),I=o(6709),L=o(5655),T=o(3238),k=o(403),Y=o(1572),_=o(3848),d=o(7579),m=o(8505),f=o(2722),a=o(262),p=o(2843),e=o(4650),h=o(529);let g=(()=>{class i{constructor(t){this.httpClient=t}list(){return this.httpClient.get("admin/getUsers?")}save(t){return this.httpClient.post("admin/userOperations?oper=add",t)}delete(t){return this.httpClient.post(`admin/deleteUser?userId=${t}`,null)}update(t,r){return this.httpClient.post(`admin/userOperations?oper=edit&id=${t}`,r)}updatePassword(t){return this.httpClient.post("admin/changePassword",t)}reportingUnits(t){return this.httpClient.get(`admin/addReportingUnits?id=${t}`)}saveReportingUnits(t){return this.httpClient.post("admin/userRUs",t)}userRoles(t){return this.httpClient.get(`admin/addUserRoles?id=${t}`)}saveUserRoles(t){return this.httpClient.post("admin/userRoles",t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(h.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var b=o(9439),J=o(6284),N=o(7404),j=o(8271),z=o(5264);let G=(()=>{class i{transform(t,...r){return t.value!==r[0]?"Passwords are not matching.":""}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"confirmPasswordValidation",type:i,pure:!0}),i})();function ee(i,c){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"confirmPasswordValidation"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,t.form.controls[t.name],t.form.controls[t.password].value),"\n")}}let V=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["form-error-confirm-password"]],inputs:{form:"form",name:"name",password:"password"},decls:2,vars:4,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(e.YNc(0,ee,3,4,"mat-error",0),e.ALo(1,"isFieldInvalid")),2&t&&e.Q6J("ngIf",e.xi3(1,1,r.form.controls[r.name],r.form.controls[r.name].value))},dependencies:[A.O5,C.TO,z.P,G]}),i})();function te(i,c){if(1&i&&(e.TgZ(0,"mat-form-field",4)(1,"mat-label"),e._uU(2,"Password"),e.qZA(),e._UZ(3,"input",17),e.TgZ(4,"mat-error"),e._UZ(5,"form-error",18),e.qZA()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("form",t.form)}}function se(i,c){if(1&i&&(e.TgZ(0,"mat-form-field",4)(1,"mat-label"),e._uU(2,"Confirm Password"),e.qZA(),e._UZ(3,"input",19),e.TgZ(4,"mat-error"),e._UZ(5,"form-error-confirm-password",20),e.qZA()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("form",t.form)}}let ie=(()=>{class i{constructor(t,r,v,U,S,M,Z){this.dialogData=t,this.userService=r,this.passwordService=v,this.formBuilder=U,this.formValidation=S,this.notificationService=M,this.dialogRef=Z,this.subject=new d.x}ngOnInit(){this.user=this.dialogData.user,this.user?this.updateForm():this.createForm()}createForm(){this.form=this.formBuilder.group({username:["",[n.kI.required,n.kI.minLength(4)]],firstName:["",[n.kI.required,n.kI.minLength(2),n.kI.pattern("[a-zA-Z]*")]],lastName:["",[n.kI.required,n.kI.minLength(2),n.kI.pattern("[a-zA-Z]*")]],email:["",[n.kI.required,n.kI.email]],password:["",[n.kI.required,n.kI.minLength(5),n.kI.maxLength(20)]],confirmPassword:["",[n.kI.required,n.kI.minLength(5),n.kI.maxLength(20),this.passwordService.matchValues("password")]],enabled:[!0,n.kI.required],initial:[!0]})}updateForm(){this.form=this.formBuilder.group({id:[this.user.id],username:[this.user.username,[n.kI.required,n.kI.minLength(4)]],firstName:[this.user.firstName,[n.kI.required,n.kI.minLength(2),n.kI.pattern("[a-zA-Z]*")]],lastName:[this.user.lastName,[n.kI.required,n.kI.minLength(2),n.kI.pattern("[a-zA-Z]*")]],email:[this.user.email,[n.kI.required,n.kI.email]],enabled:[this.user.enabled,n.kI.required],initial:[!0]})}createUser(){this.userService.save(this.form.value).pipe((0,m.b)(t=>{this.notificationService.show(t),this.dialogRef.close(!0)}),(0,a.K)(t=>(this.formValidation.validateAllFields(this.form,t),(0,p._)(()=>t))),(0,f.R)(this.subject)).subscribe()}updateUser(){this.userService.update(this.user.id,this.form.value).pipe((0,m.b)(t=>{this.notificationService.show(t),this.dialogRef.close(!0)}),(0,a.K)(t=>(this.formValidation.validateAllFields(this.form,t),(0,p._)(()=>t))),(0,f.R)(this.subject)).subscribe()}ngOnDestroy(){this.subject.next(!0),this.subject.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.WI),e.Y36(g),e.Y36(b.C),e.Y36(n.qu),e.Y36(J.m),e.Y36(N.g),e.Y36(u.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-user"]],decls:36,vars:8,consts:[[1,"flex-auto"],["mat-dialog-title",""],[1,"mt-8",3,"formGroup"],[1,"mat-typography"],[1,"w-full"],["matInput","","type","text","formControlName","username"],["matInput","","type","text","formControlName","firstName"],["name","firstName",3,"form"],["matInput","","type","text","formControlName","lastName","placeholder","Last Name"],["name","lastName",3,"form"],["matInput","","type","text","formControlName","email","placeholder","Email"],["name","email",3,"form"],["class","w-full",4,"ngIf"],["formControlName","enabled",3,"color"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"],["matInput","","type","password","formControlName","password","placeholder","Password"],["name","password",3,"form"],["matInput","","type","password","formControlName","confirmPassword","placeholder","Confirm Password"],["name","confirmPassword","password","password",3,"form"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Create or Update User"),e.qZA(),e.TgZ(3,"form",2)(4,"mat-dialog-content",3)(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Username"),e.qZA(),e._UZ(8,"input",5),e.qZA(),e.TgZ(9,"mat-form-field",4)(10,"mat-label"),e._uU(11,"First Name"),e.qZA(),e._UZ(12,"input",6),e.TgZ(13,"mat-error"),e._UZ(14,"form-error",7),e.qZA()(),e.TgZ(15,"mat-form-field",4)(16,"mat-label"),e._uU(17,"Last Name"),e.qZA(),e._UZ(18,"input",8),e.TgZ(19,"mat-error"),e._UZ(20,"form-error",9),e.qZA()(),e.TgZ(21,"mat-form-field",4)(22,"mat-label"),e._uU(23,"Email"),e.qZA(),e._UZ(24,"input",10),e.TgZ(25,"mat-error"),e._UZ(26,"form-error",11),e.qZA()(),e.YNc(27,te,6,1,"mat-form-field",12),e.YNc(28,se,6,1,"mat-form-field",12),e.TgZ(29,"mat-checkbox",13),e._uU(30,"Enabled"),e.qZA()(),e.TgZ(31,"mat-dialog-actions",14)(32,"button",15),e._uU(33,"Cancel"),e.qZA(),e.TgZ(34,"button",16),e.NdJ("click",function(){return r.user?r.updateUser():r.createUser()}),e._uU(35,"Save"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",r.form),e.xp6(11),e.Q6J("form",r.form),e.xp6(6),e.Q6J("form",r.form),e.xp6(6),e.Q6J("form",r.form),e.xp6(1),e.Q6J("ngIf",null===r.user),e.xp6(1),e.Q6J("ngIf",null===r.user),e.xp6(1),e.Q6J("color","primary"),e.xp6(5),e.Q6J("disabled",!r.form.valid))},dependencies:[n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,C.TO,C.KE,C.hX,l.lW,x.Nt,u.ZT,u.uh,u.xY,u.H8,A.O5,I.oG,j.A,V],changeDetection:0}),i})(),re=(()=>{class i{constructor(t,r,v,U,S,M,Z){this.dialogData=t,this.notificationService=r,this.dialogRef=v,this.formBuilder=U,this.userService=S,this.formValidation=M,this.passwordService=Z,this.subject=new d.x}ngOnInit(){this.user=this.dialogData.user,this.createForm()}createForm(){this.form=this.formBuilder.group({id:[this.user.id,[n.kI.required,n.kI.minLength(4)]],username:new n.NI({value:this.user.username,disabled:!0},n.kI.required),newPassword:["",[n.kI.required,n.kI.minLength(5),n.kI.maxLength(20)]],confirmPassword:["",[n.kI.required,n.kI.minLength(5),n.kI.maxLength(20),this.passwordService.matchValues("newPassword")]]})}updatePassword(){this.userService.updatePassword(this.form.getRawValue()).pipe((0,m.b)(t=>{this.notificationService.show(t),this.dialogRef.close(!0)}),(0,a.K)(t=>(this.formValidation.validateAllFields(this.form,t.error.data),(0,p._)(()=>t))),(0,f.R)(this.subject)).subscribe()}ngOnDestroy(){this.subject.next(!0),this.subject.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.WI),e.Y36(N.g),e.Y36(u.so),e.Y36(n.qu),e.Y36(g),e.Y36(J.m),e.Y36(b.C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-password-reset"]],decls:26,vars:4,consts:[[1,"flex-auto"],["mat-dialog-title",""],[1,"mt-8",3,"formGroup"],[1,"mat-typography"],[1,"w-full"],["matInput","","type","text","formControlName","username"],["matInput","","type","password","formControlName","newPassword","placeholder","Password"],["name","newPassword",3,"form"],["matInput","","type","password","formControlName","confirmPassword","placeholder","Confirm Password"],["name","confirmPassword","password","newPassword",3,"form"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Update User Password"),e.qZA(),e.TgZ(3,"form",2)(4,"mat-dialog-content",3)(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Username"),e.qZA(),e._UZ(8,"input",5),e.qZA(),e.TgZ(9,"mat-form-field",4)(10,"mat-label"),e._uU(11,"Password"),e.qZA(),e._UZ(12,"input",6),e.TgZ(13,"mat-error"),e._UZ(14,"form-error",7),e.qZA()(),e.TgZ(15,"mat-form-field",4)(16,"mat-label"),e._uU(17,"Confirm Password"),e.qZA(),e._UZ(18,"input",8),e.TgZ(19,"mat-error"),e._UZ(20,"form-error-confirm-password",9),e.qZA()()(),e.TgZ(21,"mat-dialog-actions",10)(22,"button",11),e._uU(23,"Cancel"),e.qZA(),e.TgZ(24,"button",12),e.NdJ("click",function(){return r.updatePassword()}),e._uU(25,"Save"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",r.form),e.xp6(11),e.Q6J("form",r.form),e.xp6(6),e.Q6J("form",r.form),e.xp6(4),e.Q6J("disabled",!r.form.valid))},dependencies:[n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,C.TO,C.KE,C.hX,l.lW,x.Nt,u.ZT,u.uh,u.xY,u.H8,j.A,V]}),i})();var F=o(805),B=o(1149);function ne(i,c){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"span",10),e._uU(3),e.qZA()()()),2&i){const t=c.$implicit;e.xp6(3),e.Oqu(t.name)}}const H=function(){return{height:"20rem"}};let W=(()=>{class i{constructor(t,r,v,U,S,M,Z){this.dialogData=t,this.userService=r,this.passwordService=v,this.formBuilder=U,this.formValidation=S,this.notificationService=M,this.dialogRef=Z,this.subject=new d.x,this.targetReportingUnits=[]}ngOnInit(){this.user=this.dialogData.user,this.user&&this.initReportingUnits()}initReportingUnits(){setTimeout(()=>{this.userService.reportingUnits(this.user.id).pipe((0,m.b)(t=>{this.reportingUnits=t.data.ruList.filter(r=>!t.data.userVO.reportingUnitIds.includes(r.id)),this.targetReportingUnits=t.data.ruList.filter(r=>t.data.userVO.reportingUnitIds.includes(r.id))}),(0,f.R)(this.subject)).subscribe()},10)}ngOnDestroy(){this.subject.next(!0),this.subject.complete()}saveReportingUnits(){const t={id:this.user.id,username:this.user.username,reportingUnitIds:this.targetReportingUnits.map(r=>r.id)};this.userService.saveReportingUnits(t).pipe((0,m.b)(r=>{this.notificationService.show(r)}),(0,f.R)(this.subject)).subscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.WI),e.Y36(g),e.Y36(b.C),e.Y36(n.qu),e.Y36(J.m),e.Y36(N.g),e.Y36(u.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-reportings"]],decls:11,vars:8,consts:[[1,"flex-auto"],["mat-dialog-title",""],[1,"mat-typography"],["sourceHeader","Available","targetHeader","Selected","filterBy","name","sourceFilterPlaceholder","Search by name","targetFilterPlaceholder","Search by name",3,"source","target","dragdrop","responsive","sourceStyle","targetStyle"],["pTemplate","item"],["align","end"],["mat-button","","mat-dialog-close","","color","warn"],["mat-button","","color","primary",3,"click"],[1,"product-item"],[1,"product-list-detail"],[1,"mb-2"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Change Reporting Units"),e.qZA(),e.TgZ(3,"mat-dialog-content",2)(4,"p-pickList",3),e.YNc(5,ne,4,1,"ng-template",4),e.qZA()(),e.TgZ(6,"mat-dialog-actions",5)(7,"button",6),e._uU(8,"Close"),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return r.saveReportingUnits()}),e._uU(10,"Save"),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("source",r.reportingUnits)("target",r.targetReportingUnits)("dragdrop",!0)("responsive",!0)("sourceStyle",e.DdM(6,H))("targetStyle",e.DdM(7,H)))},dependencies:[F.jx,l.lW,u.ZT,u.uh,u.xY,u.H8,B.G],styles:[".p-picklist-buttons.p-picklist-source-controls{display:none}  .p-picklist-buttons.p-picklist-target-controls{display:none}"]}),i})();function ae(i,c){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"span",10),e._uU(3),e.qZA()()()),2&i){const t=c.$implicit;e.xp6(3),e.Oqu(t.roleName)}}const $=function(){return{height:"20rem"}};let oe=(()=>{class i{constructor(t,r,v,U,S,M,Z){this.dialogData=t,this.userService=r,this.passwordService=v,this.formBuilder=U,this.formValidation=S,this.notificationService=M,this.dialogRef=Z,this.subject=new d.x,this.selectedUserRoles=[]}ngOnInit(){this.user=this.dialogData.user,this.user&&this.initUserRoles()}initUserRoles(){setTimeout(()=>{this.userService.userRoles(this.user.id).pipe((0,m.b)(t=>{this.userRoles=t.data.userRoles.filter(r=>!t.data.userVO.roleIds.includes(r.id)),this.selectedUserRoles=t.data.userRoles.filter(r=>t.data.userVO.roleIds.includes(r.id))}),(0,f.R)(this.subject)).subscribe()},10)}ngOnDestroy(){this.subject.next(!0),this.subject.complete()}saveUserRoles(){const t={id:this.user.id,username:this.user.username,roleIds:this.selectedUserRoles.map(r=>r.id)};this.userService.saveUserRoles(t).pipe((0,m.b)(r=>{this.notificationService.show(r)}),(0,f.R)(this.subject)).subscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.WI),e.Y36(g),e.Y36(b.C),e.Y36(n.qu),e.Y36(J.m),e.Y36(N.g),e.Y36(u.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["user-role"]],decls:11,vars:8,consts:[[1,"flex-auto"],["mat-dialog-title",""],[1,"mat-typography"],["sourceHeader","Available","targetHeader","Selected","filterBy","roleName","sourceFilterPlaceholder","Search by name","targetFilterPlaceholder","Search by name",3,"source","target","dragdrop","responsive","sourceStyle","targetStyle"],["pTemplate","item"],["align","end"],["mat-button","","mat-dialog-close","","color","warn"],["mat-button","","color","primary",3,"click"],[1,"role-item"],[1,"product-list-detail"],[1,"mb-2"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Change User Roles"),e.qZA(),e.TgZ(3,"mat-dialog-content",2)(4,"p-pickList",3),e.YNc(5,ae,4,1,"ng-template",4),e.qZA()(),e.TgZ(6,"mat-dialog-actions",5)(7,"button",6),e._uU(8,"Close"),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return r.saveUserRoles()}),e._uU(10,"Save"),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("source",r.userRoles)("target",r.selectedUserRoles)("dragdrop",!0)("responsive",!0)("sourceStyle",e.DdM(6,$))("targetStyle",e.DdM(7,$)))},dependencies:[F.jx,l.lW,u.ZT,u.uh,u.xY,u.H8,B.G],styles:[".p-picklist-buttons.p-picklist-source-controls{display:none}  .p-picklist-buttons.p-picklist-target-controls{display:none}"]}),i})();var q=o(1327),X=o(5593),K=o(5722);const le=function(){return{minWidth:"200px"}};function me(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"h2",8),e._uU(2,"User Management"),e.qZA(),e.TgZ(3,"div",9)(4,"p-multiSelect",10),e.NdJ("ngModelChange",function(v){e.CHM(t);const U=e.oxw();return e.KtG(U.selectedColumns=v)}),e.qZA(),e.TgZ(5,"button",11),e.NdJ("click",function(v){e.CHM(t);const U=e.MAs(7);return e.KtG(U.toggle(v))}),e.qZA(),e._UZ(6,"p-menu",12,13),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Akn(e.DdM(6,le)),e.Q6J("options",t.cols)("ngModel",t.selectedColumns),e.xp6(2),e.Q6J("popup",!0)("model",t.menuItems)}}function ce(i,c){if(1&i&&(e.TgZ(0,"th",15)(1,"span",16),e._uU(2),e.TgZ(3,"span",17),e._UZ(4,"p-sortIcon",18)(5,"p-columnFilter",19),e.qZA()()()),2&i){const t=c.$implicit;e.s9C("pSortableColumn",t.field),e.xp6(2),e.hij(" ",t.header," "),e.xp6(2),e.s9C("field",t.field),e.xp6(1),e.s9C("type",t.type),e.s9C("field",t.field)}}function de(i,c){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,ce,6,5,"th",14),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.selectedColumns)}}function pe(i,c){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,r=e.oxw().$implicit;e.xp6(1),e.hij(" ",r[t.field]," ")}}const ue=function(i,c){return{"true-icon pi-check-circle":i,"false-icon pi-times-circle":c}};function ge(i,c){if(1&i&&(e.TgZ(0,"td"),e._UZ(1,"i",23),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngClass",e.WLB(1,ue,t.enabled,!t.enabled))}}function he(i,c){if(1&i&&(e.YNc(0,pe,2,1,"td",22),e.YNc(1,ge,2,4,"td",22)),2&i){const t=c.$implicit;e.Q6J("ngIf","enabled"!==t.field),e.xp6(1),e.Q6J("ngIf","enabled"===t.field)}}function fe(i,c){if(1&i&&(e.TgZ(0,"tr",20),e.YNc(1,he,2,2,"ng-template",21),e.qZA()),2&i){const t=c.$implicit,r=e.oxw();e.Q6J("pSelectableRow",t),e.xp6(1),e.Q6J("ngForOf",r.selectedColumns)}}const _e=function(){return[10,25,50]};let ve=(()=>{class i{constructor(t,r,v,U){this.userService=t,this.userDialog=r,this.notificationService=v,this.confirmationService=U,this.cols=[{field:"id",type:"number",header:"Id"},{field:"username",type:"text",header:"Username"},{field:"firstName",type:"text",header:"First Name"},{field:"lastName",type:"text",header:"Last Name"},{field:"email",type:"text",header:"Email"},{field:"enabled",type:"boolean",header:"Enabled"}],this.subject=new d.x,this.filterColumns=this.cols.filter(S=>"enabled"!==S.field).map(S=>S.field),this.selectedColumns=this.cols}ngOnInit(){this.initMenus(),this.loadCars()}initMenus(){this.menuItems=[{label:"Add",icon:"pi pi-user-plus",command:()=>this.addUser()},{label:"Edit",icon:"pi pi-user-edit",command:()=>this.updateUser()},{label:"Copy",icon:"pi pi-copy",command:()=>this.copyUser()},{label:"Reporting Units",icon:"pi pi-chart-bar",command:()=>this.reportingUnits()},{label:"Roles",icon:"pi pi-shield",command:()=>this.roles()},{label:"Password",icon:"pi pi-lock",command:()=>this.updatePassword()},{label:"Delete",icon:"pi pi-trash",command:()=>this.deleteUser()}]}loadCars(){this.loading=!0,setTimeout(()=>{this.userService.list().pipe((0,m.b)(t=>{this.users=t.data.rows,this.totalRecords=t.data.records,this.loading=!1}),(0,f.R)(this.subject)).subscribe()},10)}ngOnDestroy(){this.subject.next(!0),this.subject.complete()}addUser(){this.selectedUser=null,this.addOrUpdateUser()}updateUser(){this.checkUserSelected(),this.addOrUpdateUser()}checkUserSelected(){if(!this.selectedUser)throw this.notificationService.error("Please select a user for editing"),Error("Please select a user for editing")}addOrUpdateUser(){this.userDialog.open(ie,{data:{user:this.selectedUser}}).afterClosed().subscribe(r=>{console.log(`Dialog result: ${r}`),r&&(this.loadCars(),this.selectedUser=null)})}updatePassword(){this.checkUserSelected(),this.userDialog.open(re,{data:{user:this.selectedUser}})}copyUser(){}reportingUnits(){this.checkUserSelected(),this.userDialog.open(W,{data:{user:this.selectedUser}})}roles(){this.checkUserSelected(),this.userDialog.open(oe,{data:{user:this.selectedUser}})}deleteUser(){this.checkUserSelected(),this.confirmationService.confirm({message:"Do you want to remove selected users?",accept:()=>{this.userService.delete(this.selectedUser.id).pipe((0,m.b)(t=>{this.notificationService.show(t),this.loadCars()}),(0,a.K)(t=>(this.notificationService.show(t.data.message),(0,p._)(()=>t))),(0,f.R)(this.subject)).subscribe()}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g),e.Y36(u.uw),e.Y36(N.g),e.Y36(F.YP))},i.\u0275cmp=e.Xpm({type:i,selectors:[["admin-user"]],decls:7,vars:8,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-10"],["dataKey","id","styleClass","p-datatable","selectionMode","single",3,"value","loading","paginator","rows","rowsPerPageOptions","selection","globalFilterFields","selectionChange"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","items-center"],[1,"text-xl"],[1,"ml-auto"],["optionLabel","header","selectedItemsLabel","{0} columns selected","placeholder","Choose Columns",1,"mr-3",3,"options","ngModel","ngModelChange"],["type","button","pButton","","icon","pi pi-angle-double-down","label","Actions",1,"ml-auto","p-button-rounded","p-button-sm",3,"click"],["appendTo","body",3,"popup","model"],["menu",""],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[1,"flex","items-center","font-bold"],[1,"ml-auto","flex","items-center","text-sm"],[3,"field"],["display","menu",3,"type","field"],[3,"pSelectableRow"],["ngFor","",3,"ngForOf"],[4,"ngIf"],[1,"pi",3,"ngClass"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p-table",2,3),e.NdJ("selectionChange",function(U){return r.selectedUser=U}),e.YNc(4,me,8,7,"ng-template",4),e.YNc(5,de,2,1,"ng-template",5),e.YNc(6,fe,2,2,"ng-template",6),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("value",r.users)("loading",r.loading)("paginator",!0)("rows",10)("rowsPerPageOptions",e.DdM(7,_e))("selection",r.selectedUser)("globalFilterFields",r.filterColumns))},dependencies:[k.iA,F.jx,k.lQ,k.Ei,k.fz,k.xl,n.JJ,A.mk,A.sg,A.O5,q.v2,X.Hq,n.On,K.NU],encapsulation:2}),i})(),Ce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[A.ez]}),i})();var Ue=o(1740),Te=o(4466),be=o(7772),ye=o(2453),Ae=o(2137);const Se=[{path:"",component:ve},{path:"reporting-units",component:W}];let xe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[s.Bz.forChild(Se),y.T5,k.U$,n.UX,C.lN,l.ot,x.c,D.TU,O.p0,u.Is,w.j,R.LD,P.Ps,A.ez,I.p9,L.Tx,T.si,Y.Cq,_.Nh,q.$9,X.hJ,Ce,Ue.j,Te.m,be.$,ye.EV,Ae.D,B.f,K.q4]}),i})()},1572:(Q,E,o)=>{o.d(E,{Cq:()=>k,Ou:()=>T});var s=o(1281),y=o(3353),n=o(4098),C=o(6895),l=o(4650),x=o(3238),D=o(727);function O(_,d){if(1&_&&(l.O4$(),l._UZ(0,"circle",4)),2&_){const m=l.oxw(),f=l.MAs(1);l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+m._spinnerAnimationLabel)("stroke-dashoffset",m._getStrokeDashOffset(),"px")("stroke-dasharray",m._getStrokeCircumference(),"px")("stroke-width",m._getCircleStrokeWidth(),"%")("transform-origin",m._getCircleTransformOrigin(f)),l.uIk("r",m._getCircleRadius())}}function u(_,d){if(1&_&&(l.O4$(),l._UZ(0,"circle",4)),2&_){const m=l.oxw(),f=l.MAs(1);l.Udp("stroke-dashoffset",m._getStrokeDashOffset(),"px")("stroke-dasharray",m._getStrokeCircumference(),"px")("stroke-width",m._getCircleStrokeWidth(),"%")("transform-origin",m._getCircleTransformOrigin(f)),l.uIk("r",m._getCircleRadius())}}const P=(0,x.pj)(class{constructor(_){this._elementRef=_}},"primary"),A=new l.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function I(){return{diameter:100}}});class T extends P{constructor(d,m,f,a,p,e,h,g){super(d),this._document=f,this._diameter=100,this._value=0,this._resizeSubscription=D.w0.EMPTY,this.mode="determinate";const b=T._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),b.has(f.head)||b.set(f.head,new Set([100])),this._noopAnimations="NoopAnimations"===a&&!!p&&!p._forceAnimations,"mat-spinner"===d.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),p&&(p.color&&(this.color=this.defaultColor=p.color),p.diameter&&(this.diameter=p.diameter),p.strokeWidth&&(this.strokeWidth=p.strokeWidth)),m.isBrowser&&m.SAFARI&&h&&e&&g&&(this._resizeSubscription=h.change(150).subscribe(()=>{"indeterminate"===this.mode&&g.run(()=>e.markForCheck())}))}get diameter(){return this._diameter}set diameter(d){this._diameter=(0,s.su)(d),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(d){this._strokeWidth=(0,s.su)(d)}get value(){return"determinate"===this.mode?this._value:0}set value(d){this._value=Math.max(0,Math.min(100,(0,s.su)(d)))}ngOnInit(){const d=this._elementRef.nativeElement;this._styleRoot=(0,y.kV)(d)||this._document.head,this._attachStyleNode(),d.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const d=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${d} ${d}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(d){const m=50*(d.currentScale??1);return`${m}% ${m}%`}_attachStyleNode(){const d=this._styleRoot,m=this._diameter,f=T._diameters;let a=f.get(d);if(!a||!a.has(m)){const p=this._document.createElement("style");p.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),p.textContent=this._getAnimationText(),d.appendChild(p),a||(a=new Set,f.set(d,a)),a.add(m)}}_getAnimationText(){const d=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*d).replace(/END_VALUE/g,""+.2*d).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}T._diameters=new WeakMap,T.\u0275fac=function(d){return new(d||T)(l.Y36(l.SBq),l.Y36(y.t4),l.Y36(C.K0,8),l.Y36(l.QbO,8),l.Y36(A),l.Y36(l.sBO),l.Y36(n.rL),l.Y36(l.R0b))},T.\u0275cmp=l.Xpm({type:T,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(d,m){2&d&&(l.uIk("aria-valuemin","determinate"===m.mode?0:null)("aria-valuemax","determinate"===m.mode?100:null)("aria-valuenow","determinate"===m.mode?m.value:null)("mode",m.mode),l.Udp("width",m.diameter,"px")("height",m.diameter,"px"),l.ekj("_mat-animation-noopable",m._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[l.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(d,m){1&d&&(l.O4$(),l.TgZ(0,"svg",0,1),l.YNc(2,O,1,11,"circle",2),l.YNc(3,u,1,9,"circle",3),l.qZA()),2&d&&(l.Udp("width",m.diameter,"px")("height",m.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===m.mode),l.uIk("viewBox",m._getViewBox()),l.xp6(2),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},dependencies:[C.RF,C.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let k=(()=>{class _{}return _.\u0275fac=function(m){return new(m||_)},_.\u0275mod=l.oAB({type:_}),_.\u0275inj=l.cJS({imports:[x.BQ,C.ez,x.BQ]}),_})()},7772:(Q,E,o)=>{o.d(E,{$:()=>f,V:()=>m});var s=o(4650),y=o(6895),n=o(7340),C=o(805),l=o(5963),x=o(1795);function D(a,p){if(1&a&&s._UZ(0,"span",11),2&a){const e=s.oxw(2).$implicit;s.Q6J("innerHTML",e.summary,s.oJD)}}function O(a,p){if(1&a&&s._UZ(0,"span",12),2&a){const e=s.oxw(2).$implicit;s.Q6J("innerHTML",e.detail,s.oJD)}}function u(a,p){if(1&a&&(s.ynx(0),s.YNc(1,D,1,1,"span",9),s.YNc(2,O,1,1,"span",10),s.BQk()),2&a){const e=s.oxw().$implicit;s.xp6(1),s.Q6J("ngIf",e.summary),s.xp6(1),s.Q6J("ngIf",e.detail)}}function w(a,p){if(1&a&&(s.TgZ(0,"span",15),s._uU(1),s.qZA()),2&a){const e=s.oxw(2).$implicit;s.xp6(1),s.Oqu(e.summary)}}function R(a,p){if(1&a&&(s.TgZ(0,"span",16),s._uU(1),s.qZA()),2&a){const e=s.oxw(2).$implicit;s.xp6(1),s.Oqu(e.detail)}}function P(a,p){if(1&a&&(s.YNc(0,w,2,1,"span",13),s.YNc(1,R,2,1,"span",14)),2&a){const e=s.oxw().$implicit;s.Q6J("ngIf",e.summary),s.xp6(1),s.Q6J("ngIf",e.detail)}}function A(a,p){if(1&a){const e=s.EpF();s.TgZ(0,"button",17),s.NdJ("click",function(){s.CHM(e);const g=s.oxw().index,b=s.oxw(2);return s.KtG(b.removeMessage(g))}),s._UZ(1,"i",18),s.qZA()}}const I=function(a,p){return{showTransitionParams:a,hideTransitionParams:p}},L=function(a){return{value:"visible",params:a}},T=function(a,p,e,h){return{"pi-info-circle":a,"pi-check":p,"pi-exclamation-triangle":e,"pi-times-circle":h}};function k(a,p){if(1&a&&(s.TgZ(0,"div",4)(1,"div",5),s._UZ(2,"span",6),s.YNc(3,u,3,2,"ng-container",1),s.YNc(4,P,2,2,"ng-template",null,7,s.W1O),s.YNc(6,A,2,0,"button",8),s.qZA()()),2&a){const e=p.$implicit,h=s.MAs(5),g=s.oxw(2);s.Tol("p-message p-message-"+e.severity),s.Q6J("@messageAnimation",s.VKq(12,L,s.WLB(9,I,g.showTransitionOptions,g.hideTransitionOptions))),s.xp6(2),s.Tol("p-message-icon pi"+(e.icon?" "+e.icon:"")),s.Q6J("ngClass",s.l5B(14,T,"info"===e.severity,"success"===e.severity,"warn"===e.severity,"error"===e.severity)),s.xp6(1),s.Q6J("ngIf",!g.escape)("ngIfElse",h),s.xp6(3),s.Q6J("ngIf",g.closable)}}function Y(a,p){if(1&a&&(s.ynx(0),s.YNc(1,k,7,19,"div",3),s.BQk()),2&a){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.messages)}}function _(a,p){1&a&&s.GkF(0)}function d(a,p){if(1&a&&(s.TgZ(0,"div",19)(1,"div",5),s.YNc(2,_,1,0,"ng-container",20),s.qZA()()),2&a){const e=s.oxw();s.Q6J("ngClass","p-message p-message-"+e.severity),s.xp6(2),s.Q6J("ngTemplateOutlet",e.contentTemplate)}}let m=(()=>{class a{constructor(e,h,g){this.messageService=e,this.el=h,this.cd=g,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new s.vpe,this.timerSubscriptions=[]}set value(e){this.messages=e,this.startMessageLifes(this.messages)}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){e instanceof Array||(e=[e]);const h=e.filter(g=>this.key===g.key);this.messages=this.messages?[...this.messages,...h]:[...h],this.startMessageLifes(h),this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return!(!e||!e.offsetParent)&&(null!=this.contentTemplate||this.messages&&this.messages.length>0)}clear(){this.messages=[],this.valueChange.emit(this.messages)}removeMessage(e){this.messages=this.messages.filter((h,g)=>g!==e),this.valueChange.emit(this.messages)}get icon(){const e=this.severity||(this.hasMessages()?this.messages[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.timerSubscriptions?.forEach(e=>e.unsubscribe())}startMessageLifes(e){e?.forEach(h=>h.life&&this.startMessageLife(h))}startMessageLife(e){const h=(0,l.H)(e.life).subscribe(()=>{this.messages=this.messages?.filter(g=>g!==e),this.timerSubscriptions=this.timerSubscriptions?.filter(g=>g!==h),this.valueChange.emit(this.messages),this.cd.markForCheck()});this.timerSubscriptions.push(h)}}return a.\u0275fac=function(e){return new(e||a)(s.Y36(C.ez,8),s.Y36(s.SBq),s.Y36(s.sBO))},a.\u0275cmp=s.Xpm({type:a,selectors:[["p-messages"]],contentQueries:function(e,h,g){if(1&e&&s.Suo(g,C.jx,4),2&e){let b;s.iGM(b=s.CRH())&&(h.templates=b)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(e,h){if(1&e&&(s.TgZ(0,"div",0),s.YNc(1,Y,2,1,"ng-container",1),s.YNc(2,d,3,2,"ng-template",null,2,s.W1O),s.qZA()),2&e){const g=s.MAs(3);s.Tol(h.styleClass),s.Q6J("ngStyle",h.style),s.xp6(1),s.Q6J("ngIf",!h.contentTemplate)("ngIfElse",g)}},dependencies:[y.mk,y.sg,y.O5,y.tP,y.PC,x.H],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[(0,n.X$)("messageAnimation",[(0,n.eR)(":enter",[(0,n.oB)({opacity:0,transform:"translateY(-25%)"}),(0,n.jt)("{{showTransitionParams}}")]),(0,n.eR)(":leave",[(0,n.jt)("{{hideTransitionParams}}",(0,n.oB)({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),a})(),f=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=s.oAB({type:a}),a.\u0275inj=s.cJS({imports:[y.ez,x.T]}),a})()}}]);